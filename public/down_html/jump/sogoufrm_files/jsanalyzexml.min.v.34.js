var kmap=new (function jsAnalyzXML(){var A=[],B=this,E=location.protocol.toLowerCase()==="https:",C="https://img.store.sogou.com/";function D(){var F=$s.$("searchForm"),N=[];if(F){var J=F.getElementsByTagName("input"),L={dp:true,p:true,_ast:true,_asf:true};for(var H=0;H<J.length;H++){var M=J[H];if(M.type=="hidden"&&M.value&&M.name&&!L[M.name]){N.push(M.name+"="+M.value)}}}if(!N.length){var O=window.location.toString().split("?")[1].split("&"),K=["hdq","pid","w","mfp","lxea"],I=["duppid=1","duppid=1","dr=1"],H=0,G;N=["ie=utf8"];for(H=0;H<K.length;H++){for(G=0;G<O.length;G++){if(O[G].indexOf(K[H]+"=")==0){if(H==0){H++}N.push(O[G]);if(I[H]){N.push(I[H])}break}}}}N.push("p=71330100&dp=1");N[0]="?"+(N[0]||"");A=N}this.parseXML=function(G){var F;if(window.DOMParser){F=new DOMParser().parseFromString(G,"text/xml")}else{F=new ActiveXObject("Microsoft.XMLDOM");F.async="false";F.loadXML(G)}return F.documentElement};this.xml2json=function(H){var K,G;G=F(H);K=I(G,{});function F(M){var L;if(window.DOMParser){L=new window.DOMParser().parseFromString(M,"text/xml")}else{L=new ActiveXObject("Microsoft.XMLDOM");L.async="false";L.loadXML(M)}return(L.nodeType==9)?L.documentElement:L}function J(N,P){var L,O,M;for(O=0,M=N.length;O<M;O++){L=N[O];if(L.nodeType===2){P[L.nodeName]=L.value}}}function I(L,O){if(!L){return{}}O=O||{};var U=L.nodeType,V=L.nodeName,S=L.nodeValue;if(U==1){var P,M,R=L.childNodes,T,N,Q;J(L.attributes,O);for(P=0,M=R.length;P<M;P++){T=R[P];Q=T.nodeName;N=I(T,{});if(typeof N==="string"){O._text=N}else{if(typeof N==="object"){if(O[Q]){if(!(O[Q] instanceof Array)){O[Q]=[O[Q]]}O[Q].push(N)}else{O[Q]=N}}}}return O}else{if(U===3||U===4){if(!(/^\s+$/.test(S))){return S}}}}return K};this.splicelink=function(K,H,G,F,I,M,J){if(!A.length){D()}var L=A.concat(["query="+encodeURIComponent(K)]);if(H){L.push("oriId="+H)}if(G){L.push("clickId="+G)}if(F){L.push("clickArea="+F)}if(I){L.push("kmaptype="+encodeURIComponent(I))}if(typeof (M)!="undefined"){L.push("pos="+M)}if(typeof (J)!="undefined"){L.push("songpos="+J)}return L.join("&")};this.first=function(G,F){if(G){return G.getElementsByTagName(F)[0]}return null};this.all=function(G,F){if(G){return G.getElementsByTagName(F)}return null};this.attr=function(H,G){if(!H){return""}var F=H.getAttribute(G);if(!F&&G.indexOf("id")>=0){F=H.getAttribute("sg2oids")}return F||""};this.tagtext=function(F){if(!F||F.firstChild==null){return""}return F.firstChild.nodeValue};this.tagtxt=function(H){if(!H||!H.firstChild){return""}for(var F=0;F<H.childNodes.length;F++){var G=H.childNodes[F];if(G.nodeType==4){return G.nodeValue}}return H.firstChild.nodeValue};this.pos=function(G){var F=G.offsetLeft,H=G.offsetTop;while(G=G.offsetParent){F+=G.offsetLeft;H+=G.offsetTop}return[F,H]};this.feedlink=function(K,L,H,G,J,I){var F=$s.$c("a",K,L);F.href="#";F.innerHTML=G||"¾À´í";F.setAttribute("hidefocus",true);F.style.outline="none";if(J){if(I){F.parentNode.style.display="none"}else{F.style.display="none"}}return F};this.hidefocus=function(F,H,G,I){F.href=G;F.innerHTML=H;F.setAttribute("hidefocus",true);F.style.outline="none";F.target="_blank";F.id=I};this.getImgLink=function(F){return typeof $s.httpsUtil=="undefined"?F:$s.httpsUtil.getCdnImgLink(F)};this.imghandle=function(J,K,I,F){K=this.getImgLink(K);var G="/images/kmap/default"+((F==90)?90:70)+".png";J.onerror=function(){J.src=G;J.style.visibility="visible";J.style.marginLeft="0px";J.style.marginTop="0px";return };J.src=K||G;J.onload=function(){J.style.visibility="hidden";H(J);J.style.visibility="visible"};function H(L){if(L.height==0){setTimeout(function(){H(L)},50);return }if(I!=L.width){var M=Math.floor((L.width-I)/2);J.style.marginLeft=(-M)+"px"}if(F!=L.height){var M=Math.floor((L.height-F)/2);J.style.marginTop=(-M)+"px"}}};this.imageHandle=function(K,L,H,F){L=this.getImgLink(L);var G="/images/kmap/default"+((F==90)?90:70)+".png";K.onerror=function(){K.src=G;K.style.visibility="visible";K.style.marginLeft="0px";K.style.marginTop="0px";K.width=H;return };K.onload=function(){K.style.visibility="hidden";J(K,H,F);K.style.visibility="visible"};K.src=L||G;function J(N,M,O){if(N.height==0){setTimeout(function(){J(N,M,O)},50);return }var P=I(N.width,N.height,M,O);N.style.marginLeft=-P.ml+"px";N.style.marginTop=-P.mt+"px";if(P.height){N.height=P.height}if(P.width){N.width=P.width}}function I(N,Q,M,P){var S,O,R={};if(Q*M<N*P&&(Q>P||N>M)){N=N*P/Q;S=(N-M)/2;O=0;if(Q!=P){R.height=P}}else{Q=Q*M/N;O=Q-P;if(O>Q*0.16){O=Q*0.08}else{O/=2}S=0;if(N!=M){R.width=M}}R.ml=parseInt(S);R.mt=parseInt(O);return R}};this.len=function(F){if(F){return F.replace(/<.*?>/g,"").replace(/[^\x00-\xff]/g,"rr").replace(/&nbsp;/g," ").length}return 0};this.cutLength=function(I,F,G,H){G=G||"..";H=H||2;if(this.len(I)>F){do{I=I.substring(0,I.length-1)}while(I&&(this.len(I)+H>F));if(I.lastIndexOf("</")!=I.lastIndexOf("<")){I=I.substring(0,I.lastIndexOf("<"))+I.substring(I.lastIndexOf(">")+1)}return I+G}return I};this.q2b=function(L){try{var G=[],H=0,F=L.length,J,I;for(;H<F;H++){J=L.charCodeAt(H);if(J>65280&&J<65375){G.push(String.fromCharCode(J-65248))}else{G.push(L.charAt(H))}}return G.join("")}catch(K){return L}};this.dommouseact=function(I,H,F,G){I.onmouseover=function(){G.className=F};I.onmouseout=function(){G.className=H}};this.tupudissatisfied=function(G,H,F){$s.$(G).target="_blank";if($s.$(H)){$s.$(G).scenehtml.value=$s.$(H).outerHTML}else{$s.$(G).scenehtml.value=""}$s.$(G).content.value=F;$s.$(G).action="/complain/tupu/front/index.php";$s.$(G).submit()};this.kmapPB=function(H,G){var F=[];F.push(location.protocol+"//pb.sogou.com/pv.gif?uigs_productid=kmap&type=",H,G);F.push("&sab=",sab,"&k_uuid=",uuid,"&gbkQuery=",encodeURIComponent(gbkQuery));if(typeof uigs_para!="undefined"&&(H=="left"||H=="right")){F.push("&abtestid=",uigs_para.abtestid,"&query=",encodeURIComponent(uigs_para.query),"&loc=",uigs_para.loc,"&uigs_uuid=",uigs_para.uigs_uuid)}(new Image()).src=F.join("")};this.speedStat=function(F){return };this.cutRankList=function(G){var H=$s.$("right"),F=$s.$("main"),J,I;if(!H||!F){return }J=H.scrollHeight;I=F.scrollHeight;if(J<I+45){return }if(G){G.style.display="none"}};this.cutAds=function(){var N=$s.$("right"),J=$s.$("main"),F,M,K,G=[],H,I;if(!N||!J){return }F=N.scrollHeight;M=J.scrollHeight;K=$s.$$(N,"div");for(var L=0;L<K.length;L++){if(((K[L].id=="bdfs0"&&K[L].className=="b_rb")||K[L].className=="bizr_rb")&&K[L].style.display!="none"){G.push(K[L])}}if(!G){return }H=Math.ceil((F-M)/90);I=(G.length-H<=0)?1:G.length-H;for(var L=I;L<G.length;L++){if(G[L]){G[L].style.display="none"}}};this.cutQueryList=function(O){if(!O){return }var P=$s.$("right"),J=$s.$("main"),F,N,G,K=[],M=[],I,H;if(!P||!J){return }F=P.scrollHeight;N=J.scrollHeight;G=$s.$$(O,"div");for(var L=0;L<G.length;L++){if(G[L].id=="kmap-query-td-b"&&G[L].className=="td-b"&&G[L].style.display!="none"){K.push(G[L])}}I=Math.ceil((F-N)/85);H=(K.length-I<=0)?1:K.length-I;for(var L=H;L<K.length;L++){if(K[L]){K[L].style.display="none"}}G=$s.$$(O,"li");for(var L=0;L<G.length;L++){if(G[L].className=="kmap-query-li"&&G[L].style.display!="none"){M.push(G[L])}}I=Math.ceil((F-N)/34);H=(M.length-I<=3)?3:M.length-I;for(var L=H;L<M.length;L++){if(M[L]){M[L].style.display="none"}}F=P.scrollHeight;if(F>N){O.style.display="none"}};this.cutRecommendKmap=function(){var U=$s.$("kmap_entity_div");if(!U){return }var T=$s.$("right"),H=$s.$("main"),F,Q;if(!T||!H){return }F=T.scrollHeight;Q=H.scrollHeight;if(F>Q){var G=4;if((window.rightVrView&&window.rightVrView=="1024")||$s.viewport().width<1200){G=3}var O=U.getElementsByTagName("ul"),V=0;for(var N=0,I=O.length;N<I;N++){var P=O[N];if(/(^|\s+)rvr-atAdPiclist($|\s+)/.test(P.className)){var S=P.getElementsByTagName("li"),M=0;for(var K=0,R=S.length;K<R;K++){if(S[K].style.display!="none"){M++}}V+=Math.ceil(M/G)}}for(var J=0;J<V-3;J++){L(U,G)}function L(Z,f){var b=Z.getElementsByTagName("ul");for(var W=b.length,c=W-1;c>=0;c--){var e=b[c];if(/(^|\s+)rvr-atAdPiclist($|\s+)/.test(e.className)&&e.style.display!="none"&&e.id!="kmap_business_ul"){var h=e.getElementsByTagName("li"),g=h.length,a=0;for(var Y=0;Y<g;Y++){if(h[Y].style.display!="none"){a++}}if(a>f){for(var X=f;X<2*f&&X<g;X++){h[X].style.display="none"}e.className+=" kmap-cuts";break}else{if(a>0&&a<=f){var d=e.previousSibling;while(d&&d.nodeType!=1){d=d.previousSibling}e.style.display="none";d.style.display="none";break}}}}}}}})();