define("",["$","$s"],function(d,n){var T=location.protocol.toLowerCase(),ia=T+"//www.sogou.com/socialplaza/homepage?ownerid=${userid}",ta=T+"//www.sogou.com/socialplaza/homepage",L=null,M=null,U=!1,u,V,ua={2:"\u7535\u5f71",3:"\u7535\u89c6\u5267",6:"\u5c0f\u8bf4",18:"\u97f3\u4e50"},H=!1,r=!1,y=["\u6211\u4e5f\u70b9\u8bc4","\u4fee\u6539\u70b9\u8bc4"],m={me:!1,info:null},N=!1,ja=0,z=0,W=0,p,X,Y,Z,ka,aa,ba,O,P,Q,f,R="kmap_socail_praise";n.wait(R,function(va){function wa(a,c){if(!(n.ua&&n.ua.ie6||!a)){var e=kmap.attr(a,"show"),b=kmap.attr(a,"name"),t=kmap.attr(a,"type"),h=kmap.attr(kmap.first(a,"icon"),"iconaddress"),I=kmap.tagtext(kmap.first(a,"ptype")),g=kmap.tagtext(kmap.first(a,"intro")),A=kmap.tagtext(kmap.first(a,"docid"));kmap.tagtext(kmap.first(a,"docurl"));var k=kmap.tagtext(kmap.first(a,"baikeurl")),m=kmap.attr(a,"sg2oids");"1"===e&&h&&ua[t]&&(e=I||"\u540d\u79f0",p=A,X=k,Y=b,Z=h,g="string"===typeof g?ca(d.trim(g).replace(/"/g,'\\"'),200,!0):"",ka=g,aa=m,ba=t,t='<div class="vr-spraise-pop" style="display:none;"><div class="vr-sppop-con" style="top:0px;"><h4>\u70b9\u8bc4<a href="javascript:void(0);" id="btnSocialPraiseClose" class="vr-sp-pop-x"></a></h4><div class="vr-sppop-form"><div class="vr-sppop-tit vr-spform-tit"><label>${type}</label><span>${name}</span></div><div class="vr-sppop-tit"><label>\u8bc4\u4ef7</label><span class="vr-graphicMv-star" id="spanPraiseRank"><span style="width:0" data-rank="0"></span></span></div><div class="vr-sppop-tit vr-sp-dis"><label>\u8bc4\u8bba</label><textarea placeholder="\u5199\u4e2a\u7b80\u77ed\u8bc4\u8bba\u5427O(\u2229_\u2229)O~\uff08\u60a8\u53ef\u8f93\u516550\u5b57\uff09" maxlength="50" id="txtSocialPraiseContent" tabindex="1001"></textarea></div><div class="vr-share-btn"><span class="share-box"><input type="checkbox" id="chkSocialPraiseShare" /><label for="chkSocialPraiseShare">\u5206\u4eab\u7ed9QQ\u597d\u53cb</label></span><a href="javascript:void(0);" class="vr-spbtn-del" id="btnSocialPraiseDelete" style="display:none;">\u5220\u9664</a><a href="javascript:void(0);" class="vr-spbtn-del" id="btnSocialPraiseCancel">\u53d6\u6d88</a><a href="javascript:void(0);" class="vr-spbtn vr-bluebtn vr-bluebtnun" id="btnSocialPraiseSubmit" tabindex="1002">\u786e\u5b9a</a></div></div></div></div>'.replace("${type}",e).replace("${name}",b),f.append(t),t='<div class="vr-spraise-card"><div class="vr-spraise-img"><img src="${imageUrl}" onerror="this.src=\'/images/social/praise/default.jpg\';this.onerror=null;" /></div><div class="vr-spraise-info"><h5>${name}</h5><p class="vr-spraise-grade"><span class="vr-sp-gradetit">\u7f51\u53cb\u8bc4\u5206:</span><span class="vr-graphicMv-star" id="spanSocialPraiseScore" style="cursor: pointer"><span style="width:78%"></span></span><em>0.0</em></p><div class="vr-spraise-ava"><a href="javascript:void(0);" class="vr-spcard-btn" id="btnSocialPraiseComment">\u6211\u4e5f\u70b9\u8bc4</a><ul class="vr-spraise-list"></ul><a id="btnSocialPraiseView" href="javascript:void(0);" class="vr-sprank150206-link"><label class="vr-sprank150206-text"></label><span class="rt-rank150203-triangle"></span></a></div></div></div>'.replace("${imageUrl}",n.httpsUtil.getCdnImgLink(h)).replace("${name}",b),f.append(t),t='<h4 class="dyntit">${newName}</h4>'.replace("${newName}","\u5927\u5bb6\u5bf9\u201c"+b+"\u201d\u7684\u8bc4\u4ef7"),f.append(t),f.append('<div class="user-list"><ul></ul><div class="user-load my-user-load" style="display:none;"><p><img src="/images/social/loading.gif" height="22" width="22" alt="">\u52aa\u529b\u52a0\u8f7d\u4e2d...</p></div><div class="user-load my-user-last" style="display:none;"><p class="last-user-item"><img src="/images/social/lasticon.gif" width="13px" height="13px" />\u5df2\u5230\u6700\u540e\u4e00\u6761</p></div></div>'),f.find(".user-list").append('<div class="vr-sppop-con vr-spnocon-evaluate" style="display:none;"><div class="vr-sppop-form"><div class="vr-sppop-tit"><label>\u8bc4\u4ef7\uff1a</label><span class="vr-graphicMv-star" id="spanSocialPraiseRank2"><span style="width:0%" data-rank="0"></span></span></div><div class="vr-sppop-tit vr-sp-dis"><textarea placeholder="\u5199\u4e2a\u7b80\u77ed\u8bc4\u8bba\u5427O(\u2229_\u2229)O~\uff08\u60a8\u53ef\u8f93\u516550\u5b57\uff09" id="txtSocialPraiseContent2"></textarea></div><div class="vr-share-btn"><span class="share-box" style="display:none;"><input type="checkbox" checked id="chkSocialPraiseShare2"><label for="chkSocialPraiseShare2">\u5206\u4eab\u7ed9QQ\u597d\u53cb</label></span><a href="javascript:void(0);" class="vr-spbtn vr-bluebtn vr-bluebtnun" id="btnSocialPraiseSubmit2">\u786e\u5b9a</a></div></div></div>'),O=z=0,P=xa(),null!=P&&P[p]&&(b=P[p],z=C(b.total,0),O=la(b.score,0)),f.find("p.vr-spraise-grade span.vr-graphicMv-star span").css("width",10*O+"%"),f.find("p.vr-spraise-grade>em").html(O.toFixed(1)),f.click(function(a){var b=a.target;b&&d(b).hasClass("vr-sp-pop-x")?(l("socialPraise","popup","close"),f.find(".vr-spraise-pop").hide(),a.preventDefault()):b&&"btnSocialPraiseCancel"==d(b).attr("id")?(l("socialPraise","popup","cancel"),f.find(".vr-spraise-pop").hide(),a.preventDefault()):b&&d(b).hasClass("vr-spcard-btn")?(l("socialPraise","popup","showByButton"),ma(b,f),a.preventDefault()):b&&"btnSocialPraiseSubmit"==d(b).attr("id")?(l("socialPraise","comment","submit"),na(b,f),a.preventDefault()):!b||"spanSocialPraiseScore"!=d(b).attr("id")&&"spanSocialPraiseScore"!=d(b).parent().attr("id")?b&&"btnSocialPraiseDelete"==d(b).attr("id")?(ya(b,f),a.preventDefault()):b&&d(b).hasClass("vr-praiseicon")?(l("socialPraise","endorse","submit"),za(b),a.preventDefault()):b&&d(b).parent().hasClass("vr-praiseicon")?(d(b).parent().click(),a.preventDefault()):b&&"btnSocialPraiseView"==d(b).attr("id")?(Aa(b,f),a.preventDefault()):b&&"btnSocialPraiseView"==d(b).parent().attr("id")?(d(b).parent().click(),a.preventDefault()):b&&"btnSocialPraiseSubmit2"==d(b).attr("id")?(Ba(b,f),a.preventDefault()):b&&"btnSocialPraiseCancel2"==d(b).attr("id")&&a.preventDefault():(l("socialPraise","popup","showByScore"),ma(f.find(".vr-spcard-btn"),f))}),f.find(".user-list").scroll(function(a){var b=this.scrollHeight,c=d(this).scrollTop(),e=d(this).height();!H&&0<c-ja&&.9<(c+e)/b&&"none"==f.find(".my-user-load").css("display")&&(ja=c,q(),Ca());a.preventDefault();a.stopPropagation();return!1}),f.find("#txtSocialPraiseContent").keyup(function(){da()}),f.find("#spanPraiseRank,#spanSocialPraiseRank2").on({mouseenter:function(a){L=d(this).offset().left;M=d(this).width();U=!0;V=C(d(this).find("span").attr("data-rank"),0);u=2*Math.ceil((a.pageX-L)/M*5);u=Math.max(u,2);ea(d(this).find("span"),u)},mousemove:function(a){U&&(a=2*Math.ceil((a.pageX-L)/M*5),a=Math.max(a,2),a!=u&&(u=a,ea(d(this).find("span"),a)))},mouseleave:function(){ea(d(this).find("span"),V);da();u=M=L=0;U=!1},click:function(a){V=u;a.preventDefault()}}),d(window).resize(function(a){Da()}),d(document).click(function(a){a=a.target;if("none"==f.find(".vr-spraise-pop").css("display")||a&&d(a).hasClass("vr-spcard-btn")||a&&("spanSocialPraiseScore"==d(a).attr("id")||"spanSocialPraiseScore"==d(a).parent().attr("id")))return!0;if((a=d(a).parentsUntil(f))&&0<a.length){if((a=a.get(a.length-1))&&d(a).hasClass("vr-spraise-pop"))return!0;l("socialPraise","popup","closeAnywhere");f.find(">div.vr-spraise-pop").hide()}}),f.find("textarea").focus(function(){d(this).parent().addClass("vr-sp-dis-on")}).blur(function(){d(this).parent().removeClass("vr-sp-dis-on")}),f.find("#chkSocialPraiseShare").get(0).onclick=function(){var a=d(this);return"true"==a.attr("data-enable")?(a.attr("data-force","true"),!0):!1},S()&&f.find("textarea").each(function(){var a=d(this),b=a.attr("placeholder");b&&(a.attr("oldColor",a.css("color")||"#000"),a.css("color","#888").val(b))}).blur(function(){var a=d(this),b=a.attr("placeholder"),c=a.val();""==d.trim(c)&&a.css("color","#888").val(b)}).focus(function(){var a=d(this),b=a.attr("placeholder"),c=a.val();d.trim(c)==b?a.css("color","#888").val(""):a.css("color",a.attr("oldColor"))}),F(function(){f.parent().css("display","");f.find(".vr-spraise-img img").load(function(){oa(this,110,110)}).each(function(a,b){b&&b.complete&&oa(this,110,110)});Ea()}),l("socialPraise","card","init"))}}function Fa(){if("undefined"===typeof kmapPraise||!kmapPraise)return null;var a,c={},e=kmap.parseXML(kmapPraise.xml),b;try{b=kmap.tagtxt(kmap.first(e,"endorse"));a=jQuery.parseJSON(b);for(var d in a)c[a[d].docid]=a[d]}catch(h){return null}return c}function xa(){if("undefined"===typeof kmapPraise||!kmapPraise)return null;var a,c={},e=kmap.parseXML(kmapPraise.xml),b;try{b=kmap.tagtxt(kmap.first(e,"s_comments"));a=jQuery.parseJSON(b);for(var d in a)c[a[d].docid]=a[d]}catch(h){return null}return c}function ea(a,c){d(a).attr("data-rank",c);d(a).css("width",10*c+"%")}function F(a,c,e){e=D()?"/social/data/friends":"/social/data/un_friends";v(e,{cmd:"comment",ownerid:p,start:0,num:20},function(b){if(b&&"string"==typeof b.total){Q=[];H=0>=b.left?!0:!1;z=b.total;W=b.left;var e=la(b.score,0);f.find("p.vr-spraise-grade span.vr-graphicMv-star span").css("width",10*e+"%");f.find("p.vr-spraise-grade>em").html(e.toFixed(1));var h=b.friend_count||0,e=J(b.total,r),I=0;if(0<h){for(h=0;b.doc&&h<b.doc.length;h++){var k=b.doc[h];k&&("2"==k.friend_stat||"3"==k.friend_stat)&&k.user&&k.user.headurl&&(Q.push(k.user),I++);if(2<=I)break}if(0<I){for(var A="",h=0;h<Q.length&&2>h;h++){var k=Q[h],l="/images/skin/defaultuser.png";k.headurl&&(l=k.headurl);A+='<li class="soc-disava" style="${display}"><a href="${personPage}" target="_blank" title="${hoverTitle}" id="btnSocialPraiseImage"><img src="${imageUrl}" onerror="this.src=\'${defaultUrl}\';this.onerror=null;" width="20px" height="20px" /></a></li>'.replace("${imageUrl}",n.httpsUtil.getCdnImgLink(l)).replace("${defaultUrl}","/images/skin/defaultuser.png").replace("${display}",r&&0<h?"display:none":"").replace("${personPage}",ia).replace("${hoverTitle}",k.nickname||"").replace("${userid}",k.userid)}f.find("ul.vr-spraise-list").html(A)}}0<I?f.find(".vr-spraise-ava .vr-sprank150206-text").html(r?"\u8bc4\u4ef7":"\u6709QQ\u597d\u53cb\u8bc4\u4ef7").attr("data-count",b.total).attr("data-friend","1"):(f.find(".vr-spraise-ava .vr-sprank150206-text").html(r?"\u8bc4\u4ef7":e+"\u4eba\u53c2\u4e0e\u8bc4\u8bba").attr("data-count",b.total).attr("data-friend","0"),0==e&&f.find(".vr-spraise-ava .vr-sprank150206-text").parent().css("display","none"));"1"!=b.blank&&N?(f.find(".dyntit").css("display",""),f.find(".user-list").css("display",""),f.find(".vr-spraise-ava .rt-rank150203-triangle").addClass("rt-rank150203-triangleup").parent().attr("data-open","1")):(f.find(".dyntit").hide(),f.find(".user-list").hide(),f.find(".vr-spraise-ava .rt-rank150203-triangle").removeClass("rt-rank150203-triangleup").parent().attr("data-open","0"));e=y["0"];"1"==b.mine_count?(m.me=1,m.id=b.mine_id,e=y[b.mine_count]):(m.me=0,m.id=null,m.info=null,e=y["0"]);f.find(".vr-spraise-ava>.vr-spcard-btn").html(e);A=pa({code:"ok",list:b.doc});A&&d.trim(A)||(A='<li class="user-item my-user-item-no-data last"><p class="user-item-nocon">\u8fd8\u6ca1\u6709\u70b9\u8bc4\uff0c\u8d76\u7d27\u505a\u7b2c\u4e00\u4e2a\u70b9\u8bc4\u4eba\u5427\uff01</p></li>',qa());f.find(".user-list ul").html(A);H&&4<z?f.find(".my-user-last").css("display",""):f.find(".my-user-last").css("display","none");f.find(".user-list").scrollTop(0);"function"==typeof a&&a(b)}else g("\u5f53\u524d\u7f51\u7edc\u4e0d\u4f73\uff0c\u8bf7\u8fc7\u4f1a\u8bd5\u8bd5\u5427"),"function"==typeof c&&c()},function(){g("\u5f53\u524d\u7f51\u7edc\u4e0d\u4f73\uff0c\u8bf7\u8fc7\u4f1a\u8bd5\u8bd5\u5427");"function"==typeof c&&c()})}function Ca(){var a=z-W;isNaN(a)&&(a=20);l("socialPraise","card","list");var a={cmd:"comment",ownerid:p,start:a,num:20},c=+new Date,e=D()?"/social/data/friends":"/social/data/un_friends";v(e,a,function(a){var e=+new Date;a&&"string"==typeof a.total?(e-=c,300<=e&&(e=1),setTimeout(function(){H=0>=a.left?!0:!1;z=a.total;W=a.left;var c=pa({code:"ok",list:a.doc});c&&d.trim(c)&&f.find(".user-list ul").append(c);q(!0);H&&4<z?f.find(".my-user-last").css("display",""):f.find(".my-user-last").css("display","none")},e)):(g("\u5f53\u524d\u7f51\u7edc\u4e0d\u4f73\uff0c\u8bf7\u8fc7\u4f1a\u8bd5\u8bd5\u5427"),q(!0))},function(){g("\u5f53\u524d\u7f51\u7edc\u4e0d\u4f73\uff0c\u8bf7\u8fc7\u4f1a\u8bd5\u8bd5\u5427");q(!0)})}function Ga(a,c){var e={op:"get",type:"doccomment",detail:w({id:m.id})};v("/zan/api",e,function(b){b&&"ok"==b.code?"function"==typeof a&&a(b.comment):(g("\u5f53\u524d\u7f51\u7edc\u4e0d\u4f73\uff0c\u8bf7\u8fc7\u4f1a\u8bd5\u8bd5\u5427"),"function"==typeof c&&c())},function(){g("\u5f53\u524d\u7f51\u7edc\u4e0d\u4f73\uff0c\u8bf7\u8fc7\u4f1a\u8bd5\u8bd5\u5427");"function"==typeof c&&c()})}function pa(a){var c="";if(a&&"ok"==a.code&&d.isArray(a.list))for(var e=0;e<a.list.length;e++){var b=a.list[e],t="\u533f\u540d",h=b.inner_uid,f;f=(f=b.key)?f.replace("_cid",""):f;var g=ra(b.content),k=null,l="",p="",q="",u="\u533f\u540d",v="\u533f\u540d",z="\u8d5e",w=0,B="",y=0,x="";b.zan&&"undefined"!=typeof b.zan.count&&(w=C(b.zan.count,0),0<w&&(B="<em>"+J(w)+"</em>"));y=10*C(b.score,0);b.user&&b.user.headurl&&(k=b.user.headurl,q="1"==b.friend_stat?ta:ia.replace("${userid}",b.user.userid));b.user&&b.user.nickname&&(t=ra(b.user.nickname),u=ca(t,24,!0),v=ca(t,10,!0));k&&d.trim(k)||(k="/images/skin/defaultuser.png");if("2"==b.friend_stat)l="",x='<img src="/images/social/praise/ico-qqf.v.1.gif" />';else if("3"==b.friend_stat)l="",x='<img src="/images/social/praise/ico-qqff.v.1.gif" />';else if("1"==b.friend_stat){var l=" my-vr-rpraisebg-me",x='<img src="/images/social/praise/ico-main.v.1.gif" />',E=f,F=y/10,G=b.share,K;K=(K=b.content)?K.replace(/&#92;/g,"\\"):K;m.info={id:E,rank:F,share:G,content:K}}H&&e==a.list.length-1&&(l+=" last");b.zan&&"undefined"!==typeof b.zan.me&&(z="\u53d6\u6d88\u8d5e",p=" vr-praiseicon-on");b=D()?'<li class="user-item${className}" data-id="${id}" data-uid="${uid}"><div class="avatar"><a href="${personPage}" target="_blank" title="${hoverTitle}" id="btnSocialPraiseImageLink"><img src="${imageUrl}" onerror="this.src=\'${defaultUrl}\';this.onerror=null;"></a></div><div class="user-con"><p class="name"><a id="btnSocialPraiseLink" href="${personPage}" target="_blank" class="name-txt" data-name1="${name1}" data-name2="${name2}">${name}</a><span class="vr-graphicMv-star"><span style="width:${rank}"></span></span><a href="javascript:void(0);" id="btnSocialPraiseEndorse" class="vr-praiseicon${praiseClassName}" data-count="${count}" title="${countTitle}"><i></i>${countHtml}</a></p><p class="txt">${content}</p><p class="vr-txtfrom">${from}</p></div></li>':'<li class="user-item${className}" data-id="${id}" data-uid="${uid}"><div class="avatar"><a title="${hoverTitle}" style="cursor:default;"><img src="${imageUrl}" onerror="this.src=\'${defaultUrl}\';this.onerror=null;"></a></div><div class="user-con"><p class="name"><a class="name-txt" data-name1="${name1}" data-name2="${name2}" style="cursor: default;">${name}</a><span class="vr-graphicMv-star"><span style="width:${rank}"></span></span><a href="javascript:void(0);" class="vr-praiseicon${praiseClassName}" id="btnSocialPraiseEndorse" data-count="${count}" title="${countTitle}"><i></i>${countHtml}</a></p><p class="txt">${content}</p><p class="vr-txtfrom">${from}</p></div></li>';c+=b.replace("${imageUrl}",n.httpsUtil.getCdnImgLink(k)).replace("${className}",l).replace("${personPage}",q).replace("${hoverTitle}",t).replace("${personPage}",q).replace("${name}",r?v:u).replace("${defaultUrl}","/images/skin/defaultuser.png").replace("${name1}",u).replace("${name2}",v).replace("${id}",f).replace("${uid}",h).replace("${rank}",y+"%").replace("${praiseClassName}",p).replace("${count}",w).replace("${countHtml}",B).replace("${countTitle}",z).replace("${content}",g).replace("${from}",x)}return c}function oa(a,c,e){var b=a.width||a.naturalWidth,f=a.height||a.naturalHeight;b&&f&&(b>f?(b=b*e/f,d(a).attr("height",e+"px"),b>c&&d(a).css("position","relative").css("left",.5*(c-b)+"px").css("height",e+"px").parent().css("position","relative")):(f=f*c/b,d(a).attr("width",c+"px"),f>e&&(e=f-e,f*=.08,f=f<e?0-f:0-.5*e,d(a).css("position","relative").css("top",f+"px").css("width",c+"px").parent().css("position","relative"))))}function za(a){var c=d(a).parent().parent().parent();if(0<c.length){var c=c.attr("data-id"),e={op:"add",type:"endorse",docid:c,detail:'{"from":"doccomment", "docid": "'+p+'"}'};D()?(d(a).hasClass("vr-praiseicon-on")&&(e.op="del"),v("/zan/api",e,function(b){if(b&&"ok"==b.code){var c=d(a).hasClass("vr-praiseicon-on"),e=d(a).attr("data-count");b.endorses&&b.endorses[0]&&b.endorses[0].count?e=b.endorses[0].count:(e=C(e,0),e=c?e-1:e+1);d(a).attr("data-count",e).find("em").remove();0<e&&d(a).append("<em>"+J(e)+"</em>");c?d(a).removeClass("vr-praiseicon-on").css("title","\u8d5e"):d(a).addClass("vr-praiseicon-on").attr("title","\u53d6\u6d88\u8d5e");g(c?"\u5df2\u53d6\u6d88\u70b9\u8d5e\uff01":"\u70b9\u8d5e\u6210\u529f\uff01",!0);l("socialPraise","endorse","submit"+(c?"DeleteSuccess":"AddSuccess"))}else g("\u5f53\u524d\u7f51\u7edc\u4e0d\u4f73\uff0c\u8bf7\u8fc7\u4f1a\u8bd5\u8bd5\u5427")},function(){g("\u5f53\u524d\u7f51\u7edc\u4e0d\u4f73\uff0c\u8bf7\u8fc7\u4f1a\u8bd5\u8bd5\u5427")})):(n.cookie("social_praise",w({cookieType:"endorse",docid:p,id:c}),3E5),fa())}}function ma(a,c){if(!G(a))if(c.find(".vr-tipspop").remove(),1==m.me){B(a);var e=function(b){if(b){var c=C(b.rank,0);sa(10<c?10:0>c?0:c,b.content,b.share,!0);m.info=b;x()}k(a)};m.info?e(m.info):Ga(e,function(){k(a)})}else e=c.find(".vr-spnocon-evaluate"),"none"==e.css("display")?x():e.find("#txtSocialPraiseContent2").focus()}function na(a,c){if(!G(a)&&!d(a).hasClass("vr-bluebtnun")){var e=c.find("#spanPraiseRank span").attr("data-rank"),b=ga(c.find("#txtSocialPraiseContent")),f=c.find("#chkSocialPraiseShare").is(":checked")?"1":"0",h;d.trim(b)||0<e?b&&50<d.trim(b).length&&50<Ha(d.trim(b))?g("\u8f93\u5165\u7684\u6587\u5b57\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57~~\uff01"):(h={op:"add",type:"doccomment",docid:p},e={score:e,content:ha(b),share:f,name:Y,pic:Z,label:ba,baike:X,clickId:aa,summary:ka,from:"tupu"},D()&&"undefined"!=typeof userinfo&&"undefined"!=typeof userinfo.username&&(e.username=ha(userinfo.username)),h.detail=w(e),D()?(B(a),"1"==m.me&&(h.op="update",e.id=m.info.id),h.detail=w(e),v("/zan/api",h,function(b){k(a);b&&"ok"==b.code?0<b.count||"update"==h.op?(E(),g("\u8bc4\u8bba\u6210\u529f\uff01",!0),c.find(".vr-spraise-ava>.vr-spcard-btn").html(y[1]),c.find(".user-list ul").find(".my-user-item-no-data").remove(),l("socialPraise","comment","submit"+("update"===h.op?"UpdateSuccess":"AddSuccess")),F(function(){E(!0);x(!0);q(!0)},function(){E(!0);x(!0);q(!0)})):g("\u91cd\u590d\u8bc4\u8bba\uff01"):b&&"invalid"==b.code?g("\u8bc4\u8bba\u5305\u542b\u654f\u611f\u5185\u5bb9\uff01"):b&&"forbidden"==b.code?g("\u60a8\u5df2\u88ab\u7981\u8a00\uff01"):b&&"usernameforbidden"==b.code?g("\u7528\u6237\u540d\u5305\u542b\u654f\u611f\u5185\u5bb9\uff01"):g("\u5f53\u524d\u7f51\u7edc\u4e0d\u4f73\uff0c\u8bf7\u8fc7\u4f1a\u8bd5\u8bd5\u5427")},function(){k(a);g("\u5f53\u524d\u7f51\u7edc\u4e0d\u4f73\uff0c\u8bf7\u8fc7\u4f1a\u8bd5\u8bd5\u5427")})):(e.cookieType="comment",e.docid=h.docid,n.cookie("social_praise",w(e),3E5),fa())):g("\u8bc4\u8bba\u4e0d\u80fd\u4e3a\u7a7a\uff01")}}function Ba(a,c){if(!G(a))if(D()){var e=c.find("#spanSocialPraiseRank2 span").attr("data-rank"),b=ga(c.find("#txtSocialPraiseContent2")),f=c.find("#chkSocialPraiseShare2").is(":checked")?"1":"0",h;d.trim(b)||0<e?b&&50<d.trim(b).length&&d.trim(b)?g("\u8f93\u5165\u7684\u6587\u5b57\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57~~\uff01"):(B(a),h={op:"add",type:"doccomment",docid:p},e={score:e,content:ha(b),share:f,name:Y,pic:Z,label:ba,baike:X,clickId:aa,from:"tupu"},h.detail=w(e),v("/zan/api",h,function(b){b&&"ok"==b.code?0<b.count?(c.find(".user-list>ul").find(".my-user-item-no-data").remove(),c.find(".vr-spraise-ava>.vr-spcard-btn").html(y[1]),qa(!0),k(a),g("\u8bc4\u8bba\u6210\u529f\uff01",!0),F(function(){q(!0)},function(){q(!0)})):(k(a),g("\u91cd\u590d\u8bc4\u8bba\uff01")):b&&"invalid"==b.code?g("\u8bc4\u8bba\u5305\u542b\u654f\u611f\u5185\u5bb9\uff01"):b&&"forbidden"==b.code?g("\u60a8\u5df2\u88ab\u7981\u8a00\uff01"):(k(a),g("\u5f53\u524d\u7f51\u7edc\u4e0d\u4f73\uff0c\u8bf7\u8fc7\u4f1a\u8bd5\u8bd5\u5427"))},function(){k(a);g("\u5f53\u524d\u7f51\u7edc\u4e0d\u4f73\uff0c\u8bf7\u8fc7\u4f1a\u8bd5\u8bd5\u5427")})):g("\u8bc4\u8bba\u4e0d\u80fd\u4e3a\u7a7a\uff01")}else fa()}function ya(a,c){l("socialPraise","comment","delete");if(!G(a)){B(a);var e={op:"del",type:"doccomment",docid:p,detail:w({id:m.info.id,from:"tupu"})};v("/zan/api",e,function(b){b&&"ok"==b.code?(E(),F(function(){E(!0);x(!0);q(!0)},function(){E(!0);x(!0);q(!0)}),c.find(".vr-spraise-ava>.vr-spcard-btn").html(y[0]),g("\u5df2\u5220\u9664\u8bc4\u8bba\uff01",!0),k(a),l("socialPraise","comment","deleteSuccess")):(g("\u5f53\u524d\u7f51\u7edc\u4e0d\u4f73\uff0c\u8bf7\u8fc7\u4f1a\u8bd5\u8bd5\u5427"),k(a))},function(){g("\u5f53\u524d\u7f51\u7edc\u4e0d\u4f73\uff0c\u8bf7\u8fc7\u4f1a\u8bd5\u8bd5\u5427");k(a)})}}function Da(){var a=n.viewport().width,c=r;r=1200>a?!0:!1;c!=r&&(f.find("li.soc-disava").each(function(a,b){r&&0<a?d(b).hide():d(b).css("display","")}),f.find(".name-txt").each(function(a,b){var c=r?d(b).attr("data-name2"):d(b).attr("data-name1");d(b).html(c)}),f.find(".vr-sprank150206-text").each(function(a,b){var c=d(b).html(),f=C(d(b).attr("data-count"),0),g=d(b).attr("data-friend");c&&(c=r?"\u8bc4\u4ef7":"1"==g?"\u6709QQ\u597d\u53cb\u8bc4\u4ef7":J(f,r)+"\u4eba\u53c2\u4e0e\u8bc4\u8bba",d(b).html(c))}))}function g(a,c){var e=c?"":"display:none;";R="msg"+ +new Date;f.find(".vr-tipspop").remove();e=d('<p class="vr-tipspop" id="${id}"><i class="vr-tickicon" style="${style}"></i>${message}</p>'.replace("${style}",e).replace("${message}",a).replace("${id}",R));f.append(e);e.css("top",(f.height()-e.height())/2+"px");e.css("left",(f.width()-e.width())/2+"px");window.setTimeout(function(){f.find("#"+R).remove()},2E3)}function q(a){a=a?"none":"";f.find(".my-user-load").css("display",a)}function fa(){var a=d("#loginBtn").get(0);a&&a.click()}function x(a){var c=f.find(".vr-spraise-pop");if(a)c.hide(),c.find("#spanPraiseRank span").attr("data-rank",0).css("width","0%"),c.find("#txtSocialPraiseContent").val("").blur(),c.find("#chkSocialPraiseShare").removeAttr("data-enable").removeAttr("data-force").get(0).checked=!1,c.find("#btnSocialPraiseDelete").hide(),c.find("#btnSocialPraiseCancel").css("display","");else{c.css("display","");if(S()&&(a=c.find("#txtSocialPraiseContent"),S())){var e=d(a).attr("placeholder"),b=d(a).val();!d.trim(b)&&e&&d(a).val(e)}da();c=c.find(">.vr-sppop-con");a=(f.height()-c.height())/2;c.css("top",a+"px")}}function Aa(a,c){G(a)||("1"==d(a).attr("data-open")?(d(a).attr("data-open","0"),N=!1,B(a),c.find(".user-list").slideUp("fast",function(){c.find(".dyntit").slideUp("fast",function(){d(a).find(".rt-rank150203-triangle").removeClass("rt-rank150203-triangleup");k(a)})})):"0"==d(a).attr("data-open")?(d(a).attr("data-open","1"),N=!0,B(a),c.find(".dyntit").slideDown("fast",function(){c.find(".user-list").slideDown(200,function(){k(a);d(a).find(".rt-rank150203-triangle").addClass("rt-rank150203-triangleup");var c=d(this).find(">ul").height(),c=Math.min(c+2,300);d(this).height(c);d(this).css("overflow","");d(this).css("display","");var b=this;setTimeout(function(){d(b).css("height","")},20)}).css("overflow","hidden")})):(B(a),F(function(){d(a).attr("data-open","1");N=!0;c.find(".dyntit").slideDown("fast",function(){c.find(".user-list").slideDown(200,function(){k(a);var c=d(this).find(">ul").height(),c=Math.min(c+2,300);d(this).height(c);d(this).css("overflow","");d(this).css("display","");var b=this;setTimeout(function(){d(b).css("height","")},20)}).css("overflow","hidden")})},function(){k(a)},!0)))}function qa(a){var c=f.find(".vr-spnocon-evaluate");a||(c.find("#spanSocialPraiseRank2 span").attr("data-rank","0").css("width","0"),c.find("#txtSocialPraiseContent2").val(""));c.css("display","none")}function E(a){a?f.css("height",""):f.css("height",f.height()+"px")}function da(){var a=f.find("#spanPraiseRank span").attr("data-rank"),c=ga(f.find("#txtSocialPraiseContent")),e=f.find("#chkSocialPraiseShare"),b=f.find("#btnSocialPraiseSubmit");d.trim(c)||0<a?b.removeClass("vr-bluebtnun"):b.addClass("vr-bluebtnun");d.trim(c)?(e.attr("data-enable","true").parent().removeClass("share-box-unclick"),e.get(0).readOnly=!1,"true"!=e.attr("data-force")&&(e.get(0).checked=!0)):(e.removeAttr("data-enable").parent().addClass("share-box-unclick"),e.get(0).readOnly=!0,e.get(0).checked=!1)}function Ea(){var a=n.cookie("social_praise");if(D()&&a&&d.trim(a)){var c=d.parseJSON(a);c.docid==p&&("comment"==c.cookieType?(l("socialPraise","comment","submitCookie"),sa(c.score,c.content,c.share),na(f.find("#btnSocialPraiseSubmit"),f)):"endorse"==c.cookieType&&(l("socialPraise","endorse","submitCookie"),v("/zan/api",{op:"add",type:"endorse",docid:c.id,detail:'{"from":"doccomment"}'},function(a){a&&"ok"==a.code?(f.find(".user-list>ul>li").each(function(b,f){var h=null,g=0;if(d(f).attr("data-id")==c.id)return h=d(f).find(".vr-praiseicon"),g=d(h).attr("data-count"),h&&(a.endorses&&a.endorses[0]&&a.endorses[0].count?g=a.endorses[0].count:(g=C(g,0),g+=1),d(h).attr("data-count",g).find("em").remove(),0<g&&d(h).append("<em>"+J(g)+"</em>"),d(h).addClass("vr-praiseicon-on").attr("title","\u53d6\u6d88\u8d5e")),!0}),g("\u70b9\u8d5e\u6210\u529f\uff01",!0)):g("\u5f53\u524d\u7f51\u7edc\u4e0d\u4f73\uff0c\u8bf7\u8fc7\u4f1a\u8bd5\u8bd5\u5427")})),n.cookie("social_praise","",10))}}function sa(a,c,e,b){var g=f.find(".vr-spraise-pop");g.find("#spanPraiseRank span").attr("data-rank",a).css("width",10*a+"%");g.find("#txtSocialPraiseContent").val(c);g.find("#chkSocialPraiseShare").get(0).checked="1"==e?!0:!1;g.find("#btnSocialPraiseDelete").css("display","");g.find("#btnSocialPraiseCancel").hide();b||g.find("#btnSocialPraiseSubmit").each(function(){d.trim(c)||0<a?d(this).removeClass("vr-bluebtnun"):d(this).addClass("vr-bluebtnun")}).css("display","")}function S(){return n.ua&&n.ua.ie}function D(){return window.userinfo&&"undefined"!==typeof userinfo.puid?!0:!1}function w(a){var c=[],e;for(e in a)c.push('"{key}":"{value}"'.replace("{key}",e).replace("{value}",a[e]));return"{"+c.join(",")+"}"}function ra(a){return a?a.replace(/&#92;/g,"\\").replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):a}function ha(a){return a?a.replace(/\\/g,"&#92;").replace(/"/g,'\\"'):a}function v(a,c,e,b,f){if(d&&d.ajax)return c.t=(new Date).getTime(),d.ajax({type:"GET",url:a,data:c,dataType:f||"json",success:e,error:b})}function k(a){d(a).removeAttr("data-disabled")}function B(a){d(a).attr("data-disabled","1")}function G(a){return"1"==d(a).attr("data-disabled")}function C(a,c){c=c||0;try{var e=parseInt(a,10);return isNaN(e)?c:e}catch(b){}return c}function la(a,c){c=c||0;try{var e=parseFloat(a);return isNaN(e)?c:e}catch(b){}return c}function ga(a){var c=d(a).val();S()&&d(a).attr("placeholder")==c&&(c="");return c}function J(a,c){var e=999<a?999:a;c&&(e=99<e?99:e);return e}function l(a,c,e){var b="",d=n.cookie("SUV"),f="";window.userinfo&&window.userinfo.puid&&(b=window.userinfo.puid);window.oldQuery&&(f=window.oldQuery);(new Image).src=T+"//pb.sogou.com/pv.gif?uigs_productid=webapp&uigs_t="+(new Date).getTime()+"&query="+window.encodeURIComponent(f)+"&puid="+b+"&suv="+d+"&type=nsp_"+a+"&stype="+c+e}function Ha(a){for(var c=!1,e=/[^\x00-\xff]/g,b="",d=0,f=0;f<a.length;f++){b=a.charAt(f).toString();if("<"==b)c=!0;else if(">"==b){c=!1;continue}c||(d=null!=b.match(e)?d+2:"A"<=b&&"Z">=b?d+1.5:d+1)}return d}function ca(a,c,d){if(!a)return"";for(var b=!1,f=/[^\x00-\xff]/g,h="",g=0,k=a.length,l=0;l<a.length;l++){h=a.charAt(l).toString();if("<"==h)b=!0;else if(">"==h){b=!1;continue}if(!b&&(g=null!=h.match(f)?g+2:"A"<=h&&"Z">=h?g+1.4:g+1,g>c)){k=l;break}}c=a;k<a.length&&(c=a.substr(0,k),d&&(c+="..."));return c}f=d(va);(function(){if(kmap&&kmap_properties&&kmap_properties.right&&kmap_properties.right.entity){r=1200>n.viewport().width?!0:!1;var a=Fa()||{};wa(kmap_properties.right.entity,a);window.onHandleSocialPraiseImage=function(a,e,b){var f=a.width,g=a.height;f&&g&&(f>g?(f=f*b/g,d(a).attr("height",b+"px"),f>e&&d(a).css("position","relative").css("left",.5*(e-f)+"px").parent().css("position","relative")):(g=g*e/f,d(a).attr("width",e+"px"),g>b&&(e=g-b,g*=.08,g=g<e?0-g:0-.5*e,d(a).css("position","relative").css("top",g+"px").parent().css("position","relative"))))}}})()})});